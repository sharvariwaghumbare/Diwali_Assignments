package com.demo.student;

import java.io.Serializable; 
import java.util.List; 
import java.util.ArrayList;
import java.io.FileOutputStream;
import java.io.ObjectOutputStream;
import java.util.Collections;
public class StudentAssign {

class AttendanceLowException extends Exception {
    AttendanceLowException(String msg) {
        super(msg);
    }
}

class Student implements Serializable {
    int rollno;
    String name;
    String course;
    double attendance;
    double score;

    Student() {}

    Student(int rollno, String name, String course, double attendance, double score) {
        this.rollno = rollno;
        this.name = name;
        this.course = course;
        this.attendance = attendance;
        this.score = score;
    }

    String calculateGrade() throws AttendanceLowException {
        if (attendance < 60)
            throw new AttendanceLowException("Attendance below 60% for: " + name);

        if (score >= 85)
            return "A";
        else if (score >= 70)
            return "B";
        else if (score >= 50)
            return "C";
        else
            return "D";
    }

    public String toString() {
        return rollno + " - " + name + " - " + course + " - " + attendance + "% - " + score;
    }
}

public class StudentAssign {
    public static void main(String[] args) {
        try {
            List<Student> list = new ArrayList<>();

            list.add(new Student(1, "Sharvari", "Java", 92, 89));
            list.add(new Student(2, "Rohan", "Java", 59, 76));
            list.add(new Student(3, "Priya", "Java", 74, 67));
            list.add(new Student(4, "Amit", "Java", 64, 72));
            list.add(new Student(5, "Kiran", "Java", 91, 90));
            list.add(new Student(6, "Sneha", "Java", 55, 48));
            list.add(new Student(7, "Neha", "Java", 80, 73));
            list.add(new Student(8, "Vikas", "Java", 66, 63));
            list.add(new Student(9, "Riya", "Java", 87, 82));
            list.add(new Student(10, "Sahil", "Java", 95, 91));

            // serialize list to file
            ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream("students.dat"));
            out.writeObject(list);
            out.close();
            System.out.println("10 student records stored successfully.\n");

            // sort students by decreasing attendance
            Collections.sort(list, (a, b) -> Double.compare(b.attendance, a.attendance));

            System.out.println("Students (sorted by attendance):");
            for (Student s : list) {
                System.out.print(s + " â†’ ");
                try {
                    System.out.println("Grade: " + s.calculateGrade());
                } catch (AttendanceLowException e) {
                    System.out.println(e.getMessage());
                }
            }

        } catch (Exception e) {
            System.out.println("Error: " + e);
        }
    }
}
}
